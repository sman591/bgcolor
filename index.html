<!doctype html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <title>Background Colorpicker Previewer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="//favicon.ico" type="image/x-icon" sizes="16x16">
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" media="screen" type="text/css" href="colorpicker/css/colorpicker.css" />
    <link rel="stylesheet" media="screen" type="text/css" href="style.css" />
</head>
<body>

	<div class="row-fluid">
		<div class="span6 offset3 content">
			<h3 class="page-header">Background Colorpicker Previewer</h3>
			<p>Use the colorpicker below to select &amp; preview your new color.</p>
            <div class="holder">
                <div class="color-code">#00c4ff</div><div id="colorSelector"><div style="background-color: #00c4ff"></div></div>
            </div>
            <p class="footer">brought to you by <a href="http://stuartolivera.com">stuart olivera</a>&nbsp; | &nbsp;available on <a href="https://github.com/sman591/bgcolor">github</a></p>
		</div>
	</div>

    <script src="//code.jquery.com/jquery-1.10.1.min.js"></script>
	<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="colorpicker/js/colorpicker.js"></script>

    <script type="text/javascript">

        function initial_color() {

            window.bgcolor = {};

            if(window.location.hash)
                hex = window.location.hash;
            else
                hex = '00c4ff';

            hex = hex.replace('#', '');

            update_color(hex);

            return hex;

        }

        function update_color(hex) {

            $('.color-code').text('#' + hex);
            $('#colorSelector div').css('backgroundColor', '#' + hex);
            $('body').css('backgroundColor', '#' + hex);

            window.bgcolor.hex = hex;

            clearTimeout(window.bgcolor.timer);
            window.bgcolor.timer = setTimeout(update_hash, 100);

        }

        function update_hash() {

            if (window.location.hash != window.bgcolor.hex)
                window.location.hash = window.bgcolor.hex;

        }

        $('#colorSelector').ColorPicker({
            color: '#' + initial_color(),
            onShow: function (colpkr) {
                $(colpkr).fadeIn(200);
                return false;
            },
            onHide: function (colpkr) {
                $(colpkr).fadeOut(200);
                return false;
            },
            onChange: function (hsb, hex, rgb) {
                update_color(hex);
            }
        });

    </script>
</body>
</html>